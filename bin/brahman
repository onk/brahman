#!/usr/bin/ruby
require "optparse"
require "brahman"

options = {}
opt = OptionParser.new
subopt = Hash.new {|hash, key|
  $stderr.puts "no such action: #{key}"
  exit 1
}
subopt["list"]  = OptionParser.new.on("-r VAL") {|v| options[:revisions] = v}
subopt["merge"] = OptionParser.new.on("-r VAL") {|v| options[:revisions] = v}
subopt["mergeinfo_clean"] = OptionParser.new.on("-r VAL") {|v| options[:revisions] = v}
opt.order!(ARGV)

action = ARGV.shift || "list"
subopt[action].parse(ARGV)
Brahman.run(action.to_sym, options)

